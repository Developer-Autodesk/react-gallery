!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){var n=a(1),i=a(2),o=a(3),l=React.createClass({displayName:"ReactGalleryApp",componentDidMount:function(){},render:function(){return React.createElement("div",null,React.createElement(i,null),React.createElement(ReactRouter.RouteHandler,null))}}),r=React.createElement(ReactRouter.Route,{handler:l},React.createElement(ReactRouter.Route,{name:"home",path:"/home",handler:n}),React.createElement(ReactRouter.Route,{name:"viewer",path:"/viewer",handler:o}));ReactRouter.run(r,function(e){React.render(React.createElement(e,null),document.getElementById("reactGalleryApp"))})},function(e,t,a){var n=a(10),i=a(11),o=a(4),l=React.createClass({displayName:"ModelList",getInitialState:function(){return{}},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){return React.createElement("ul",{className:"col-lg-12 ul-models"},this.props.models.map(function(e,t){return React.createElement("li",{key:e._id,className:"li-models"},React.createElement("div",{className:t%2?"row row-models-even":"row row-models-odd"},React.createElement("div",{className:"col-md-3"},React.createElement("img",{className:"img-responsive",src:e.thumbnail,alt:"",width:"128",height:"128"})),React.createElement("div",{className:"col-md-3"},React.createElement("h4",null,e.name),React.createElement("b",null,"Type: ")," ",e.type,React.createElement("br",null),React.createElement("b",null,"Progress: ")," ",e.progress,React.createElement("br",null),React.createElement("br",null),React.createElement("a",{className:"btn btn-primary",href:"#viewer?id="+e._id},"Show in viewer",React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})))))}))}}),r=React.createClass({displayName:"homeView",mixins:[Reflux.connect(i,"list")],getInitialState:function(){return o.viewActivated("home"),{}},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){return React.createElement("div",null,React.createElement(n,null),React.createElement("div",{className:"content-form app-content-form clearfix"},React.createElement("div",{className:"container app-container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 col-lg-3"},React.createElement("div",{id:"nav-parent",className:"page-header hidden-xs"},React.createElement("div",{"data-spy":"affix","data-offset-top":"200",className:"panel panel-default app-panel-default app-sidenav-panel"},React.createElement("div",{className:"navbar-collapse collapse navbar-responsive-collapse panel-body app-panel-body app-sidenav-body",role:"complementary"},React.createElement("div",{className:"col-lg-12"},React.createElement("ul",{className:"nav nav-pills nav-stacked app-sidenav"},React.createElement("li",{role:"presentation",className:"active"},React.createElement("a",{href:"#home",className:"first-child"},"Home")),React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#viewer",className:"first-child"},"Viewer"))))))),React.createElement("div",{id:"nav-parent-mobile",className:"page-header hidden-sm hidden-md hidden-lg"},React.createElement("div",{"data-spy":"affix","data-offset-top":"150",className:"panel panel-default app-panel-default app-sidenav-panel"},React.createElement("button",{type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":".navbar-responsive-collapse"},React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"})),React.createElement("div",{className:"navbar-collapse collapse navbar-responsive-collapse panel-body app-panel-body app-sidenav-body",role:"complementary"},React.createElement("div",{className:"col-lg-12"},React.createElement("ul",{className:"nav nav-pills nav-stacked app-sidenav"},React.createElement("li",{role:"presentation",className:"active"},React.createElement("a",{href:"#home",className:"first-child","data-toggle":"collapse","data-target":".navbar-responsive-collapse"},"Home")),React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#viewer","data-toggle":"collapse","data-target":".navbar-responsive-collapse"},"Viewer")))))))),React.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9 col-lg-9"},React.createElement("div",{className:"page-header"},React.createElement("div",{className:"panel panel-default app-panel-default home-panel"},React.createElement("div",{className:"app-api-doc app-panel-body panel-body home-panel"},React.createElement(l,{models:this.state.list}),React.createElement("div",{className:"bs-docs-section clearfix"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"col-xs-6 col-sm-6 app-button-container mob-app-button-container back-to-top-container"},React.createElement("p",{className:"bs-component"},React.createElement("a",{href:"#view-and-data-title",className:"btn app-btn app-btn-lg app-btn-default back-to-top-btn"},"Back to top"))))))))))))),React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"page-footer"},React.createElement("div",{className:"container app-container"},React.createElement("p",null,React.createElement("a",{href:"http://www.autodesk.com/company/legal-notices-trademarks/privacy-statement"},"Privacy"),"  |  ",React.createElement("a",{href:"http://www.autodesk.com/company/legal-notices-trademarks"},"Legal Notices and Trademarks"),"  |  ",React.createElement("a",{href:"http://www.autodesk.com/company/license-compliance/report-noncompliance"},"Report Noncompliance"),React.createElement("br",null),"Â© Copyright 2015 Autodesk. All rights reserved.")))))))}});e.exports=r},function(e,t,a){var n=a(12),i=a(13),o=a(6),l=a(7),r=React.createClass({displayName:"ViewerNavbar",mixins:[Reflux.connect(o,"viewerState")],componentDidMount:function(){},componentDidUpdate:function(){$("#multiselectPath").multiselect({onChange:function(e,t,a){l.viewablePathActivated(e.context.value,t)}})},componentWillUnmount:function(){},render:function(){var e=this;return _.size(e.state.viewerState.pathInfoCollection)?React.createElement("li",null,React.createElement("form",{className:"navbar-form pull-left"},React.createElement("select",{id:"multiselectPath",className:"form-control",multiple:"multiple"},Object.keys(e.state.viewerState.pathInfoCollection).map(function(t){var a=e.state.viewerState.pathInfoCollection[t];return React.createElement("option",{key:t,value:t}," ",a.name," ")})))):React.createElement("div",null," ")}}),c=React.createClass({displayName:"AboutMenu",render:function(){return React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},"About ",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:"http://developer.autodesk.com",target:"_blank"},"Get an API key")),React.createElement("li",null,React.createElement("a",{href:"http://forums.autodesk.com/t5/Web-Services-API/ct-p/94",target:"_blank"},"API Support")),React.createElement("li",null,React.createElement("a",{href:"http://www.autodesk.com",target:"_blank"},"Autodesk")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{href:"https://github.com/Developer-Autodesk/react-gallery",target:"_blank"},"Source on Github"))))}}),s=React.createClass({displayName:"appNavbar",mixins:[Reflux.connect(i,"appState")],componentDidMount:function(){},componentWillUnmount:function(){},_renderViewSpecific:function(e){switch(e){case"viewer-bkup":return React.createElement(r,null)}},render:function(){return React.createElement("div",null,React.createElement("nav",{id:"appNavbar",className:"navbar navbar-default"},React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"navbar-header"},React.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#app-navbar-content"},React.createElement("span",{className:"sr-only"},"Toggle navigation"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"})),React.createElement("a",{className:"navbar-brand",href:"#/home"},React.createElement(n,{step:"5.0",period:"100",height:"32",width:"32",src:"img/adsk/adsk-32x32-32.png","class":"navbar-spinning-img"})),React.createElement("a",{className:"navbar-brand",href:"#/home"},"Autodesk")),React.createElement("div",{className:"collapse navbar-collapse",id:"app-navbar-content"},React.createElement("ul",{className:"nav navbar-nav"},React.createElement("li",{className:"home"===this.state.appState.activeView?"active":""},React.createElement("a",{href:"#/home"},"Home")),React.createElement("li",{className:"viewer"===this.state.appState.activeView?"active":""},React.createElement("a",{href:"#/viewer"},"Viewer")),this._renderViewSpecific(this.state.appState.activeView)),React.createElement("ul",{className:"nav navbar-nav navbar-right"},React.createElement(c,null))))))}});e.exports=s},function(e,t,a){var n=a(5),i=a(4),o=a(6),l=a(7),l=a(7);a(8),a(9);var r=React.createClass({displayName:"viewerView",mixins:[Reflux.connect(o,"viewerState")],getInitialState:function(){return i.viewActivated("viewer"),{}},componentDidUpdate:function(){},componentDidMount:function(){var e=this,t=Autodesk.Viewing.Private.getParameterByName("id");""!==t&&$.get("api/models/"+t,function(t){e._loadFromUrn(t.urn)})},componentWillUnmount:function(){$(window).off("resize",this._onResize),this.viewer&&(this.viewer.finish(),this.viewer=null)},render:function(){return this.viewerId=this._newGUID(),React.createElement("div",null,React.createElement("div",{id:this.viewerId,className:"viewer"}))},_newGUID:function(){var e=(new Date).getTime(),t="xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:7&a|8).toString(16)});return t},_loadFromUrn:function(e){var t=this,a="http://"+window.location.host+"/node/react-gallery/api/token",n={environment:"AutodeskProduction"},i=new Autodesk.ADN.Toolkit.Viewer.ViewerFactory(a,n);i.onInitialized(function(){i.getViewablePath(e,function(e){l.viewablePathLoaded(e);var a={viewerType:"GuiViewer3D"};t.viewer=i.createViewer(document.getElementById(t.viewerId),a),e.path3d.length?t.viewer.load(e.path3d[0].path):e.path2d.length&&t.viewer.load(e.path2d[0].path),t._onResize(),$(window).resize(t._onResize),t._loadGalleryExtensions(t.viewer)},this._onError)})},_onError:function(e){console.log("Viewer Error: "),console.log(e)},_onResize:function(){var e=this._getClientSize(),t=$("#appNavbar").height();$(this.viewer.container).height(e.y-t),this.viewer.resize()},_getClientSize:function(){var e=window,t=document,a=t.documentElement,n=t.getElementsByTagName("body")[0],i=e.innerWidth||a.clientWidth||n.clientWidth,o=e.innerHeight||a.clientHeight||n.clientHeight;return{x:i,y:o}},_loadGalleryExtensions:function(e){var t=Autodesk.Viewing.Private.getParameterByName("id");e.loadExtension("Autodesk.ADN.Viewing.Extension.ExtensionManager",{index:0,controlGroup:"Gallery",apiUrl:n.ApiURL+"/extensions",extensionsUrl:n.ApiURL+"/extensions/transpile",extensionsSourceUrl:n.host+"/uploads/extensions"}),e.loadExtension("Autodesk.ADN.Viewing.Extension.StateManager",{index:1,controlGroup:"Gallery",apiUrl:n.ApiURL+"/states/"+t})}});e.exports=r},function(e,t,a){var n=Reflux.createActions(["viewActivated"]);e.exports=n},function(e,t,a){var n={staging:!1,host:"/node/react-gallery",bucketName:"react-gallery-bucket",viewAndDataUrl:"https://developer.api.autodesk.com",ApiURL:"http://"+window.location.host+"/node/react-gallery/api"};e.exports=n},function(e,t,a){var n=a(7),i=Reflux.createStore({listenables:[n],onViewablePathLoaded:function(e){var t=this;e.path2d.forEach(function(e,a){e.activated=!1,t.viewerState.pathInfoCollection["2d:"+a]=e}),e.path3d.forEach(function(e,a){e.activated=!1,t.viewerState.pathInfoCollection["3d:"+a]=e}),e.path3d.length?t.viewerState.pathInfoCollection["3d:0"].activated=!0:e.path2d.length&&(t.viewerState.pathInfoCollection["2d:0"].activated=!0),t.trigger(t.viewerState)},onViewablePathActivated:function(e,t){this.viewerState.pathInfoCollection[e].activated=t,this.trigger(this.viewerState)},getInitialState:function(){return this.viewerState={pathInfoCollection:{}},this.viewerState}});e.exports=i},function(e,t,a){var n=Reflux.createActions(["viewablePathLoaded","viewablePathActivated"]);e.exports=n},function(e,t,a){AutodeskNamespace("Autodesk.ADN.Viewing.Extension"),Autodesk.ADN.Viewing.Extension.ExtensionManager=function(e,t){function a(){var a=e.getToolbar(!0),n=a.getControl(t.controlGroup);return n||(n=new Autodesk.Viewing.UI.ControlGroup(t.controlGroup),a.addControl(n)),n}function n(e,t,a,n){var i=new Autodesk.Viewing.UI.Button(e);return i.icon.className=t,i.icon.style.fontSize="24px",i.setToolTip(a),i.onClick=n,i}function i(){var e=(new Date).getTime(),t="xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:7&a|8).toString(16)});return t}function o(e){localStorage["gallery.extensions"]||(localStorage["gallery.extensions"]=JSON.stringify({}));var t=JSON.parse(localStorage["gallery.extensions"]);e.forEach(function(e){t[e.id]||(t[e.id]=!1)}),localStorage["gallery.extensions"]=JSON.stringify(t)}function l(e){var t=JSON.parse(localStorage["gallery.extensions"]);return t[e.id]}function r(e){var t=JSON.parse(localStorage["gallery.extensions"]);t[e.id]=e.enabled,localStorage["gallery.extensions"]=JSON.stringify(t)}function c(a){$.getScript(t.extensionsUrl+"/"+a.id+"/"+a.file).done(function(){e.loadExtension(a.id,{connect:t.connect,disconnect:t.disconnect})}).fail(function(e,t,n){console.log("Load failed: "+a.file)})}Autodesk.Viewing.Extension.call(this,e,t);var s=i(),d={},p=null,u=this;u.load=function(){var n=a();return u.createControls(n),p=new Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel(e.container,s),$.get(t.apiUrl,function(e){o(e),d=u.initializeExtensions(e);for(var t in d)p.addExtension(d[t])}),console.log("Autodesk.ADN.Viewing.Extension.ExtensionManager loaded"),!0},u.unload=function(){return console.log("Autodesk.ADN.Viewing.Extension.ExtensionManager unloaded"),!0},u.initializeExtensions=function(t){var a={};return t.forEach(function(t){t.id.startsWith("_")||(t.handler=function(){t.enabled=!t.enabled,r(t),t.enabled?($("#"+t.itemId).addClass("enabled"),c(t)):($("#"+t.itemId).removeClass("enabled"),e.unloadExtension(t.id))},t.itemId=i(),t.enabled=l(t),t.enabled&&c(t),a[t.id]=t)}),a},u.createControls=function(e){var a=n("Autodesk.ADN.Gallery.ExtensionManager.Button.Manage","glyphicon glyphicon-plus","Manage Extensions",u.onExtensionManagerClicked);e.addControl(a,{index:t.index})},u.onExtensionManagerClicked=function(){p.setVisible(!0)},Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel=function(e,a){function n(){var e=$("#"+a+"-filter").val();$("li.extension-manager-panel-row").each(function(t){var a=$(this);!e.length||a.text().indexOf(e)>0?a.css({display:"block"}):a.css({display:"none"})})}this.content=document.createElement("div"),this.content.id=a+"PanelContentId",this.content.className="extension-manager-panel-content",Autodesk.Viewing.UI.DockingPanel.call(this,e,a,"Extensions Manager",{shadow:!0}),this.container.style.top="0px",this.container.style.left="0px",this.container.style.width="300px",this.container.style.height="400px",this.container.style.resize="auto";var i=['<div class="extension-manager-panel-container" style="z-index: 1000">','<input id="'+a+'-filter" type="text" class="form-control extension-manager-search row" placeholder="Search Extensions ...">','<ul id="'+a+'PanelContainerId" class="list-group extension-manager-panel-list-container">',"</ul>","</div>"].join("\n");$("#"+a+"PanelContentId").html(i),$("#"+a+"-filter").on("input",function(){n()}),this.addExtension=function(e){var n=t.extensionsSourceUrl+"/"+e.id+"/"+e.file,i=['<li class="extension-manager-panel-row">','<a class="list-group-item extension-manager-panel-list-group-item col-md-6" id='+e.itemId+">",'<p class="list-group-item-text">',e.name,"</p>","</a>",'<a href="'+n+'" class="list-group-item extension-manager-panel-list-group-item-src col-md-2" target=_blank>','<p class="list-group-item-text">',"Source","</p>","</a>","</li>"].join("\n");$("#"+a+"PanelContainerId").append(i),$("#"+e.itemId).click(e.handler),e.enabled&&$("#"+e.itemId).addClass("enabled")},this.clearExtensions=function(){$("#"+a+"PanelContainerId > div").each(function(e,t){$(t).remove()})}},Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype),Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel.prototype.constructor=Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel,Autodesk.ADN.Viewing.Extension.ExtensionManager.Panel.prototype.initialize=function(){this.title=this.createTitleBar(this.titleLabel||this.container.id),this.closer=this.createCloseButton(),this.container.appendChild(this.title),this.title.appendChild(this.closer),this.container.appendChild(this.content),this.initializeMoveHandlers(this.title),this.initializeCloseHandler(this.closer)};var m=["div.extension-manager-panel-content {","height: calc(100% - 10px);","}","div.extension-manager-panel-container {","height: calc(100% - 55px);","margin: 10px;","}","div.extension-manager-panel-controls-container {","margin-bottom: 10px;","}","ul.extension-manager-panel-list-container {","height: calc(100% - 35px);","overflow-y: auto;","}","a.extension-manager-panel-list-group-item {","color: #FFFFFF;","background-color: #3F4244;","margin-bottom: 5px;","border-radius: 4px;","width: calc(100% - 115px);","}","a.extension-manager-panel-list-group-item-src {","color: #FFFFFF;","background-color: #3F4244;","margin-bottom: 5px;","margin-left: 5px;","width: 45px;","border-radius: 4px;","}","a.extension-manager-panel-list-group-item:hover {","color: #FFFFFF;","background-color: #5BC0DE;","}","a.extension-manager-panel-list-group-item.enabled {","color: #000000;","background-color: #00CC00;","}","li.extension-manager-panel-row {","height: 45px;","}","input.extension-manager-search {","height: 25px;","margin-left: 1px;","margin-bottom: 10px;","width: calc(100% - 28px);","background-color: #DEDEDE;","}"].join("\n");$('<style type="text/css">'+m+"</style>").appendTo("head")},Autodesk.ADN.Viewing.Extension.ExtensionManager.prototype=Object.create(Autodesk.Viewing.Extension.prototype),Autodesk.ADN.Viewing.Extension.ExtensionManager.prototype.constructor=Autodesk.ADN.Viewing.Extension.ExtensionManager,Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.ADN.Viewing.Extension.ExtensionManager",Autodesk.ADN.Viewing.Extension.ExtensionManager)},function(e,t,a){AutodeskNamespace("Autodesk.ADN.Viewing.Extension"),Autodesk.ADN.Viewing.Extension.StateManager=function(e,t){function a(a){var n=e.getToolbar(!0),i=n.getControl(a);return i||(i=new Autodesk.Viewing.UI.ControlGroup(t.controlGroup),n.addControl(i)),i}function n(e){var a=o("Button.StatesManager","glyphicon glyphicon-retweet","Manage States",i);e.addControl(a,{index:t.index})}function i(){c.setVisible(!0),p={},$.get(t.apiUrl,function(e){c.clearStates(),e.states.forEach(function(e){var t=JSON.parse(e);p[t.guid]=t}),e.sequence.forEach(function(e){var t=p[e];t&&c.addState(t)}),c.scrollToTop()})}function o(e,t,a,n){var i=new Autodesk.Viewing.UI.Button(e);return i.icon.className=t,i.icon.style.fontSize="24px",i.setToolTip(a),i.onClick=n,i}function l(){var e=(new Date).getTime(),t="xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:7&a|8).toString(16)});return t}Autodesk.Viewing.Extension.call(this,e,t);var r=l(),c=null,s=this,d=null,p={};s.load=function(){var i=a(t.controlGroup);return n(i),c=new Autodesk.ADN.Viewing.Extension.StateManager.Panel(e.container,r),console.log("Autodesk.ADN.Viewing.Extension.StateManager loaded"),!0},s.unload=function(){return console.log("Autodesk.ADN.Viewing.Extension.StateManager unloaded"),!0},Autodesk.ADN.Viewing.Extension.StateManager.Panel=function(a,n){function i(){var e=[];$("#"+n+"PanelContainerId > div").each(function(t,a){e.push(a.id)});var a={sequence:JSON.stringify(e)};$.ajax({url:t.apiUrl+"/sequence",type:"PUT",data:a,success:function(e){},error:function(e){console.log("PUT /sequence failed:"),console.log(e)}})}var o=this,l=0,r=!1;this.content=document.createElement("div"),this.content.id=n+"PanelContentId",this.content.className="state-manager-panel-content",Autodesk.Viewing.UI.DockingPanel.call(this,a,n,"States Manager",{shadow:!0}),$(this.container).css({right:"0px",top:"0px",width:"380px",height:"400px","min-width":"10px","min-height":"10px",resize:"auto"});var c=['<div class="state-manager-panel-container">','<div class="state-manager-panel-controls-container">',"<div>",'<button class="btn btn-info" id="'+n+'saveStateBtn">','<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Save State',"</button>",'<input class="state-manager-panel-input" type="text" placeholder=" Name (default: Date/Time)" id="'+n+'stateName">',"</div>","<br>","<div>",'<button class="btn btn-info" id="'+n+'playSequenceBtn" style="width:86px;">','<span class="glyphicon glyphicon-play" aria-hidden="true"></span> <label> Play </label>',"</button>",'<input class="state-manager-panel-input" type="text" placeholder=" Period (sec / default:1sec) " id="'+n+'period">',"</div>","<br>",'<label class="state-manager-panel-label"><input id="'+n+'EditCbId" type="checkbox" name="checkbox" value="value"> Edit States</label>',"</div>",'<div id="'+n+'PanelContainerId" class="list-group state-manager-panel-list-container">',"</div>","</div>"].join("\n");$("#"+n+"PanelContentId").html(c),$("#"+n+"EditCbId").change(function(){this.checked?(d=dragula([$("#"+n+"PanelContainerId")[0]],{removeOnSpill:!0}),d.on("drop",function(e,t){i()}),d.on("remove",function(e,a){delete p[e.id],i(),$.ajax({url:t.apiUrl+"/delete/"+e.id,type:"POST",success:function(){},error:function(){console.log("delete ko")}})})):d.destroy()}),$("#"+n+"saveStateBtn").click(function(){var a=$("#"+n+"stateName").val(),i={guid:!0,seedURN:!1,objectSet:!0,viewport:!0,renderOptions:!1},l=e.getState(i);l.name=a.length?a:(new Date).toString("d/M/yyyy H:mm:ss");var r={state:JSON.stringify(l)};o.addState(l),$.ajax({url:t.apiUrl,type:"PUT",data:r,success:function(){},error:function(){console.log("Error PUT: "+t.apiUrl)}})}),$("#"+n+"playSequenceBtn").click(function(){function t(){if(l<i.length){if(r){l>0&&$(i[l-1]).removeClass("enabled"),$(i[l]).addClass("enabled");var o=p[i[l].id];e.restoreState(o),++l,setTimeout(t,1e3*a)}}else $(i[l-1]).removeClass("enabled"),l=0,r=!1,$("#"+n+"playSequenceBtn > label").text(" Play"),$("#"+n+"playSequenceBtn > span").removeClass("glyphicon-pause"),$("#"+n+"playSequenceBtn > span").addClass("glyphicon-play")}if(r=!r){$("#"+n+"playSequenceBtn > label").text(" Pause"),$("#"+n+"playSequenceBtn > span").removeClass("glyphicon-play"),$("#"+n+"playSequenceBtn > span").addClass("glyphicon-pause");var a=parseInt($("#"+n+"period").val());a=isNaN(a)?1:a;var i=$("#"+n+"PanelContainerId > div");t()}else $("#"+n+"playSequenceBtn > label").text(" Play"),$("#"+n+"playSequenceBtn > span").removeClass("glyphicon-pause"),$("#"+n+"playSequenceBtn > span").addClass("glyphicon-play")}),o.addState=function(t){p[t.guid]=t;var a=['<div class="list-group-item state-manager-panel-item" id="'+t.guid+'">',t.name,"</div>"].join("\n"),i=$("#"+n+"PanelContainerId");i.append(a),i[0].scrollTop=i[0].scrollHeight,$("#"+t.guid).click(function(){e.restoreState(p[t.guid])})},o.clearStates=function(){$("#"+n+"PanelContainerId > div").each(function(e,t){$(t).remove()})},o.scrollToTop=function(){var e=$("#"+n+"PanelContainerId");e[0].scrollTop=0}},Autodesk.ADN.Viewing.Extension.StateManager.Panel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype),Autodesk.ADN.Viewing.Extension.StateManager.Panel.prototype.constructor=Autodesk.ADN.Viewing.Extension.StateManager.Panel,Autodesk.ADN.Viewing.Extension.StateManager.Panel.prototype.setVisible=function(e){Autodesk.Viewing.UI.DockingPanel.prototype.setVisible.call(this,e)},Autodesk.ADN.Viewing.Extension.StateManager.Panel.prototype.onTitleDoubleClick=function(e){},Autodesk.ADN.Viewing.Extension.StateManager.Panel.prototype.initialize=function(){this.title=this.createTitleBar(this.titleLabel||this.container.id),this.closer=this.createCloseButton(),this.title.appendChild(this.closer),this.container.appendChild(this.title),this.container.appendChild(this.content),this.initializeMoveHandlers(this.title),this.initializeCloseHandler(this.closer)};var u=["div.state-manager-panel-content {","height: calc(100% - 30px);","}","div.state-manager-panel-container {","height: calc(100% - 70px);","margin: 10px;","}","div.state-manager-panel-controls-container {","margin-bottom: 10px;","overflow: auto;","}","div.state-manager-panel-list-container {","height: calc(100% - 100px);","overflow: auto;","}","div.state-manager-panel-item {","margin-left: 0;","margin-right: 0;","color: #FFFFFF;","background-color: #3F4244;","margin-bottom: 5px;","border-radius: 4px;","}","div.state-manager-panel-item:hover {","background-color: #5BC0DE;","}","div.state-manager-panel-item.enabled {","background-color: #5BC0DE;","}","label.state-manager-panel-label {","color: #FFFFFF;","}","input.state-manager-panel-input {","height: 30px;","width: 60%;","border-radius: 5px;","}"].join("\n");$('<style type="text/css">'+u+"</style>").appendTo("head")},Autodesk.ADN.Viewing.Extension.StateManager.prototype=Object.create(Autodesk.Viewing.Extension.prototype),Autodesk.ADN.Viewing.Extension.StateManager.prototype.constructor=Autodesk.ADN.Viewing.Extension.StateManager,Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.ADN.Viewing.Extension.StateManager",Autodesk.ADN.Viewing.Extension.StateManager)},function(e,t,a){var n=React.createClass({displayName:"banner2d",getInitialState:function(){return{}},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){return React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"page-header content-header app-content-header api-detail-header view-and-data-api"},React.createElement("div",{className:"container app-container"},React.createElement("div",{className:"col-xs-12 col-sm-6 col-md-9 col-lg-9 app-title-container"},React.createElement("h1",{id:"view-and-data-title"},"View & Data Gallery")))))))}});e.exports=n},function(e,t,a){var n=a(4),i=Reflux.createStore({listenables:[n],onAddItem:function(e){this.list.push(e),this.trigger(this.list)},getInitialState:function(){var e=this;this.list=[];var t="http://"+window.location.host+"/node/react-gallery/api/token",a=new Autodesk.ADN.Toolkit.ViewAndData.Client("https://developer.api.autodesk.com",t);return a.onInitialized(function(){$.get("api/models",function(t){console.log(t),e.list=t,t.forEach(function(t){t.thumbnail="img/adsk/adsk-128x128-32.png",$.get("api/thumbnails/"+t._id,function(a){t.thumbnail="data:image/png;base64,"+a.thumbnail.data,e.trigger(e.list)});var n=a.fromBase64(t.urn);a.getSubItemsWithProperties(n,{type:"geometry"},function(a){a.length>0&&(t.type=a[0].role,e.trigger(e.list))},function(e){}),a.getViewable(n,function(a){t.progress=a.progress,e.trigger(e.list)},function(e){},"status")}),e.trigger(e.list)})}),this.list}});e.exports=i},function(e,t,a){var n=React.createClass({displayName:"AdnSpinningImg",getInitialState:function(){return{}},componentDidMount:function(){function e(){a+=parseFloat(t.props.step),a%=360;var e="rotateY("+a+"deg)";$("#imgId").css({transform:e,"-moz-transform":e,"-webkit-transform":e,"-ms-transform":e,"-o-transform":e})}var t=this,a=0;t.props.timerId=setInterval(function(){e()},parseInt(t.props.period))},componentWillUnmount:function(){window.clearInterval(this.props.timerId)},render:function(){return React.createElement("img",{id:"imgId",height:this.props.height,width:this.props.width,src:this.props.src,className:this.props["class"]})}});e.exports=n},function(e,t,a){var n=a(4),i=Reflux.createStore({listenables:[n],onViewActivated:function(e){this.appState.activeView=e,this.trigger(this.appState)},getInitialState:function(){return this.appState={activeView:"home"},this.appState}});e.exports=i}]);