AutodeskNamespace("Autodesk.ADN.Toolkit.Viewer"),Autodesk.ADN.Toolkit.Viewer.ViewerFactory=function(e,t){function i(e){return e.indexOf("http:")>-1||e.indexOf("https:")>-1}function n(){var n={env:t.environment||"AutodeskProduction"};if(i(e)){var o=function(){var t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var i=JSON.parse(t.responseText);return i.access_token};n.getAccessToken=o,n.refreshToken=o}else n.accessToken=e;return n}function o(){var e=n();Autodesk.Viewing.Initializer(e,function(){a=!0,s&&s()})}function r(e){var t=document.createElement("div");return t.style.height="100%",e.appendChild(t),t.addEventListener("contextmenu",function(e){e.preventDefault()}),t.addEventListener("mouseover",function(){var e=window.scrollX,t=window.scrollY;window.onscroll=function(){window.scrollTo(e,t)}}),t.addEventListener("mouseout",function(){window.onscroll=null}),t}t=t||{};var a=!1,s=null;this.onInitialized=function(e){a?e():s=e},this.getViewablePath=function(e,t,i){return a?(0!==e.indexOf("urn:")&&(e="urn:"+e),void Autodesk.Viewing.Document.load(e,function(e){for(var i={path2d:[],path3d:[]},n=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry",role:"2d"},!0),o=0;o<n.length;++o)i.path2d.push({name:n[o].name,path:e.getViewablePath(n[o])});for(var r=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry",role:"3d"},!0),o=0;o<r.length;++o)i.path3d.push({name:r[o].name,path:e.getViewablePath(r[o])});t(i)},function(e){i(e)})):void i({error:"Factory not initialized. Need to subscribe to onInitialized callback"})},this.createViewer=function(e,t){t=t||{},t.viewerType=t.viewerType||"GuiViewer3D",t.progressiveRendering=t.progressiveRendering||!0,t.qualityLevel=t.qualityLevel||[!0,!0],t.lightPreset=t.lightPreset||8,t.backgroundColor=t.backgroundColor||[3,4,5,250,250,250],t.navigationTool=t.navigationTool||"freeorbit";var i=null,n=r(e);switch(t.viewerType){case"GuiViewer3D":i=new Autodesk.Viewing.Private.GuiViewer3D(n);break;case"Viewer3D":i=new Autodesk.Viewing.Viewer3D(n);break;default:console.log("Warning: viewerType not specified or incorrect in config, using Viewer3D"),console.log("Valid values: {Viewer3D, GuiViewer3D}"),i=new Autodesk.Viewing.Viewer3D(n)}i.start(),i.setProgressiveRendering(t.progressiveRendering),i.setQualityLevel(t.qualityLevel[0],t.qualityLevel[1]),i.impl.setLightPreset(t.lightPreset);var o=t.backgroundColor;return i.setBackgroundColor(o[0],o[1],o[2],o[3],o[4],o[5]),i.setDefaultNavigationTool(t.navigationTool),i},o()};